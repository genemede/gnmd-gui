@import '@yaireo/tagify/src/tagify';

input,
textarea {
    @include font-primary(16px, 400);
}

.form {
    width: 100%;
}
.stdform {
    &.hide-required-markers {
        .input-wrapper {
            > .label {
                &.is-required::after {
                    content: '';
                }
            }
        }
    }
}

.input-wrapper {
    position: relative;
    width: 100%;
    text-align: left;
    margin-top: 8px;
    &.no-margin {
        margin-top: 0px;
        &:not(:first-child) {
            margin-top: 0px;
        }
    }

    &:not(:first-child) {
        margin-top: 4px;
    }
    > .v-select {
        min-width: 120px;
    }
    > .label {
        margin-bottom: 3px;
        display: block;
        font-family: var(--font-input-label);
        font-size: var(--font-input-label-size);
        &.is-required {
            &::after {
                margin-left: 4px;
                color: var(--color-warning);
                content: '*';
            }
        }
        &.left {
            margin-left: 0;
        }
        > p {
            margin-left: 32px;
        }
    }
    .swtch {
        margin-bottom: 6px;
        .swtch-cntr {
            top: 3px;
        }
        .swtch-slot {
            position: relative;
            top: -3px;
        }
    }
    &.inline {
        display: inline-block;
        width: auto;
        //vertical-align: top;
        vertical-align: middle;
        margin-top: 0;
        &:not(:first-child) {
            padding-left: 8px;
        }
        //padding-right: 8px;
        margin-right: 8px;
    }
    &.horizontal {
        display: inline-flex;
        > .label {
            display: inline;
        }
    }

    &.flex {
        .control { display: flex; }
    }
    &.half {
        //display: inline-block;
        width: 50%;
    }
    &.rounded {
        .control {
            border-radius: 20px;
        }
    }
    &.extra-bottom {
        // maintains vertical spacing for fields with no help-text
        margin-bottom: 17px;
    }
    &.tags {
        &.xreadonly {
            .control {
                pointer-events: none;
                border: 1px solid red;
            }
        }
    }

    &.disabled {
        pointer-events: none;
        @include no-select();
        > .label {
            color: var(--input-text-disabled-color);
        }
        .control {
            background-color: var(--input-background-color);
            > input {
                color: var(--input-text-disabled-color);
                pointer-events: none;
            }
            .field-prefix,
            .field-suffix {
                color: var(--input-text-disabled-color);
            }
        }
        .input-help-text {
            color: var(--input-text-disabled-color);
        }
        &.checkbox {
            pointer-events: none;
            color: var(--input-text-disabled-color);
            > input:checked ~ .checkmark {
                background-color: gray;
            }
            .checkmark {
                background-color: gray;
            }
        }
    }
    &.small {
        .control {
            .v-select {
                font-size: 14px;
                .vs__dropdown-toggle {
                    .vs__selected-options {
                        .vs__selected {
                            height: 22px;
                        }
                    }
                }
            }
            .choices {
                font-size: 14px;
                .choices__list--single {
                    .choices__item {
                        padding-top: 2px;
                        height: 22px;
                    }
                }
            }
            input {
                font-size: 14px;
            }
        }
        &.checkbox {
            > .label {
                font-size: 14px;
                padding-left: 24px;
                &.opensans .checkmark {
                    top: 2px;
                }
            }
            .checkmark {
                top: 2px;
                height: 16px;
                width: 16px;
                &:after {
                    left: 5px;
                    top: 2px;
                    width: 4px;
                    height: 8px;
                    border-width: 0 2px 2px 0;
                }
            }
        }
    }
    &.right {
        .control {
            > input {
                text-align: right;
            }
        }
    }
    &.invalid {
        .control {
            > input,
            textarea {
                color: var(--color-error);
            }
        }
    }
    .error-message {
        pointer-events: none;
        border-radius: 3px;
        padding: 8px 6px;
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        opacity: 0;
        background-color: rgba(red, 0.9);
        transform: scale(0.95) translateY(-8px);
        transition: opacity 1.55s, transform 3s;
        font-size: 14px;
        &.visible {
            pointer-events: all;
            opacity: 1;
            transform: scale(1) translateY(0px);
            transition: opacity 0.15s, transform 0.3s;
        }
    }

    .input-help-text {
        font-size: var(--font-input-help-text-size);
        font-style: italic;
        text-align: right;
        margin-right: 8px;
        white-space: nowrap;
        min-height: 12px;
        &.has-error {
            color: var(--color-error);
        }
    }
    .input-error {
        font-size: 14px;
        color: var(--color-error);
        text-align: right;
    }
    &.padded .control {
        padding: 4px 6px;
    }
    > .v-select {

        //border-radius: var(--input-border-radius);
        //border: 1px solid var(--input-border-color);
        .vs__dropdown-toggle {
            background-color: var(--input-background-color);
        }
    }

    .control {
        position: relative;
        width: 100%;
        height: 100%;
        margin: 0;
        background-color: var(--input-background-color);
        border-radius: var(--input-border-radius);
        //display: flex;
        border: 1px solid var(--input-border-color);
        &.full-blocks {
            padding: 4px 8px 4px;
            background-color: var(--input-background-color);
            border-radius: var(--input-border-radius);
            border: 1px solid var(--input-border-color);
        }
        &.select-field {
            padding: 4px 4px;
        }
        > .choices {
            background-color: var(--input-background-color);
            padding: 4px 12px 4px;
            border: 1px solid transparent;
            .choices__list--single {
                .choices__item {
                    color: var(--input-text-color);
                }
            }
        }
        > .cooldown {
            pointer-events: none;
            position: absolute;
            left: 12px;
            top: 4px;
            width: calc(100% - 24px);
            height: calc(100% - 8px);
            div {
                height: 100%;
                background-color: rgba(green, 0.2);
            }
            &.active {
                div {
                    animation: progress 2000ms linear;
                }
            }
            &.hidden {
                opacity: 0;
            }
            @keyframes progress {
                0% {
                    background-color: rgba(green, 0.2);
                    width: 0%;
                }
                100% {
                    background-color: rgba(green, 0.5);
                    width: 100%;
                }
            }
        }
        .field-prefix,
        .field-suffix {
            padding-top: 2px;
            color: var(--text-color);
            font-size: 14px;
        }
        .field-prefix.spaced {
            margin-right: 8px;
        }
        .field-suffix.spaced {
            margin-left: 8px;
        }
        .icon {
            color: var(--text-color);
            cursor: pointer;
            &.is-left {
                margin-right: 8px;
            }
            &.is-right {
                margin-left: 8px;
            }
            &:hover {
                color: var(--text-color-high);
            }
        }
        > input,
        textarea,
        .rfcontent,
        select {
            //background-color: transparent;
            border: none;
            color: var(--input-text-color);
            //border:1px solid red;

            width: 100%;
            line-height: 1.4;
            //margin: 4px 6px;
            font-weight: 400;
            &::selection {
                background: var(--input-select-color);
            }

            &::placeholder {
                color: var(--input-placeholder-color);
                opacity: 0.8;
                font-style: italic;
                //text-transform: uppercase;
            }
            &:focus {
                outline: color-mix(in srgb, var(--input-background-color), var(--input-border-color) 15%);
                background-color: color-mix(in srgb, var(--input-background-color), var(--input-border-color) 15%);
            }
            &:disabled {
                background-color: #fbfbfb;
                color: #a0a0a0;
            }
        }

        > select {
            padding: 1px 12px 0 6px;
        }
        > option {
            //background-color: $color-input-bg;
            background-color: darken(yellow, 20%);
            color: white;
            &:checked {
                background: darken(lightblue, 5%);
            }
        }
        > input,
        textarea {
            &:read-only {
                color: var(--input-text-disabled-color);
            }
        }
        > textarea {
            resize: none;
        }
    }

    @media (max-width: 639px) {
        .control {
            //padding: 4px 8px;
            //border-radius: 3px;
            .field-prefix {
                padding-top: 3px;
                font-size: 12px;
            }
            /*
            &.select-field {

            }
            > input, textarea {

            }
            */
        }
        /*
        &.checkbox {
            > .label {

            }
        }
        */
    }
}

.form-group {
    //border: 1px dashed red;
}


.toogle-buttons {
    margin-top: 1em;
    .toogle-control {
        display: block;
        position: relative;
        margin: 1em 0;
        padding-left: 2em;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;

        .toggle-checkmark {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            height: 24px;
            width: 24px;
            background-color: transparent;
            border: 1px solid black;
            border-radius: 0.2em;

            &::after {
                content: '';
                position: absolute;
                display: none;
                left: 5px;
                top: 5px;
                width: 7px;
                height: 7px;
                border: solid white;
                border-width: 0 3px 3px 0;
                -webkit-transform: rotate(45deg);
                -ms-transform: rotate(45deg);
                transform: rotate(45deg);
            }
        }

        .exclusive {
            border-radius: 1em;

            &::after {
                content: '';
                position: absolute;
                display: none;
                left: 5px;
                top: 5px;
                width: 6px;
                height: 6px;
                background-color: blue;
                border: solid yellow;
                border-radius: 1em;
            }
        }

        .is-on {
            //background-color: #2196f3;
            //background-color: var(--text-strong);
            background-color: blue;
            &::after {
                display: block;
            }
        }

        .toggle-text {
            vertical-align: middle;
        }
    }
}

.row {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
}

.strip.row {
    a {
        margin: 0 3px;
    }
}

.tagify {
    //border: 1px dashed red;
    --tag-bg: #e1eef3;
    border: none;
    &__tag {
        margin: 3px 6px 3px 0;
    }
    &__input {
        //border: 1px dashed green;
        margin: 3px 6px 0 0;
        padding: 3px;
    }
    &__dropdown {
        $dropdown: &;
        text-align: left;
        #{$dropdown}__wrapper {
            border-top-width: 1px;
        }
    }
}

//=========================================================
.relfield {
    .rfopen {
        display: none;
        border: 1px dashed red;
        &.visible {
            display: block;
        }
    }
    .rfclosed {
        display: none;
        border: 1px dashed green;
        &.visible {
            display: block;
        }
    }
    .relitem {
        &:not(:last-child) {
            border-bottom: 1px dashed var(--input-border-color);
        }
        &.empty {
            padding: 0;
            border: none;
            color: var(--input-text-disabled-color);
            //background-color: var(--input-border-color);
        }
    }
    .relbottom {
        //padding: 0px 0px 2px;
        margin-top: 4px;
        height: 19px;
        //text-align: right;
        //background-color: var(--input-border-color);
        //border: 1px solid red;
        .rbentries {
            padding: 0px;
            font-size: 12px;
        }
        button {
            float: right;
            //margin-top: 3px;
        }
    }
}

.input-wrapper {
    &.relfield {
        > .control {
            //background-color: transparent;
            background-color: var(--input-background-color);
            //flex-direction: column;
        }
    }
}

.rfitem {
    border-radius: var(--input-border-radius);
    border: 1px solid var(--input-border-color);
    //min-height: 80px;
    margin-bottom: 4px;
    .riheader {
        display: flex;
        //flex-direction: row;
        align-items: baseline;
        padding: 4px;
        background-color: var(--group-background-color);
        span {padding: 0}
        .rhmt {
            color: var(--text-color-soft);
            font-size: 10px;
            text-transform: uppercase;
            margin-left: 8px;
        }
        .rhlabel {

        }
        .rhactions {
            //float: right;
            margin-left: auto;
        }
    }
    .ridata {
        min-height: 25px;
        //border: 3px dashed blue;
        display: flex;

        .rdleft {
            text-align: right;
            padding: 4px 8px;
            //border: 1px dashed red;
        }
        .rdright {
            width: 100%;
            padding: 4px 8px;
            //border: 1px dashed green;
        }
    }
}
//=======================================
.module {
    //margin: 16px 0;

    border-radius: var(--input-border-radius);
    border: 1px solid var(--input-border-color);
    //padding-bottom: 8px;

    .header {
        display: flex;
        background-color: var(--group-background-color);
        padding: 6px 12px;
        margin-bottom: 16px;
        .title {
            font-weight: bold;
        }
        .actions {
            margin-left: auto;
            padding-left: 8px;
            .collapser {
                cursor: pointer;
                padding: 1px 4px;
                display: inline-block;
                width: 23px;
                height: 23px;
                background-color: var(--button-background-color);
                border-radius: 50%;
            }
        }
        &.sub {
            //font-size: 14px;
            background-color: color-mix(in srgb, #fff 35%, var(--group-background-color));
            padding: 4px 6px;
            //background-color: transparent;
            margin-bottom: 8px;
            .actions {
                padding-top: 4px;
            }
            .input-wrapper {
                margin-top: 0px;
                &:not(:first-child) {
                    margin-top: 0px;
                }
            }
        }
    }
    .footer {
        display: flex;
        padding: 6px 12px;
        .title {
            font-weight: bold;
        }
        .actions {
            margin-left: auto;
            padding-left: 8px;
            .collapser {
                cursor: pointer;
                padding: 1px 4px;
                display: inline-block;
                width: 23px;
                height: 23px;
                background-color: var(--button-background-color);
                border-radius: 50%;
            }
        }

    }
    .data-container {
        padding: 0 12px;
        .data {
            padding: 0 8px;
            margin-bottom: 8px;
        }
        &.hidden {
            display: none;
        }
    }
}